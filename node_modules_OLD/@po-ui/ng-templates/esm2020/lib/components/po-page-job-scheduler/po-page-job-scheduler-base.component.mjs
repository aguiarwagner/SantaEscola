import { Input, Directive } from '@angular/core';
import { PoStepperOrientation } from '@po-ui/ng-components';
import { PoPageJobSchedulerInternal } from './po-page-job-scheduler-internal';
import { Subscription } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "./po-page-job-scheduler.service";
/**
 * @description
 *
 * O `po-page-job-scheduler` é uma página para criação e atualização de agendamentos da execução de processos (Job Scheduler),
 * como por exemplo: a geração da folha de pagamento dos funcionários.
 *
 * Para utilizar esta página, basta informar o serviço (endpoint) para consumo,
 * sem a necessidade de criar componentes e tratamentos dos dados.
 *
 * Veja mais sobre os padrões utilizados nas requisições no [Guia de implementação de APIs](guides/api).
 */
export class PoPageJobSchedulerBaseComponent {
    constructor(poPageJobSchedulerService) {
        this.poPageJobSchedulerService = poPageJobSchedulerService;
        /** Objeto com as propriedades do breadcrumb. */
        this.breadcrumb = { items: [] };
        /**
         * Parâmetros que serão utilizados para criação e edição dos agendamentos.
         *
         * Ao utilizar esta propriedade, o componente não buscará automaticamente os parâmetros da API e o campo para preenchimento do processo não será exibido.
         *
         */
        this.parameters = [];
        this.model = new PoPageJobSchedulerInternal();
        this._subscription = new Subscription();
    }
    set value(value) {
        this.model = this.poPageJobSchedulerService.convertToJobSchedulerInternal(value);
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a orientação de exibição do `po-stepper`.
     *
     * > Quando não utilizada, segue o comportamento com base nas dimensões da tela.
     *
     * > Veja os valores válidos no *enum* [PoStepperOrientation](documentation/po-stepper#stepperOrientation).
     *
     */
    set stepperDefaultOrientation(value) {
        this._orientation = Object.values(PoStepperOrientation).includes(value) ? value : undefined;
    }
    get stepperDefaultOrientation() {
        return this._orientation;
    }
    ngOnDestroy() {
        this._subscription.unsubscribe();
    }
    loadData(id) {
        if (!id) {
            this.model = this.model || new PoPageJobSchedulerInternal();
            return;
        }
        this._subscription.add(this.poPageJobSchedulerService.getResource(id).subscribe((response) => {
            this.model = response;
        }, () => {
            this.model = new PoPageJobSchedulerInternal();
        }));
    }
    markAsDirtyInvalidControls(controls) {
        for (const key in controls) {
            if (controls.hasOwnProperty(key)) {
                const control = controls[key];
                if (control.invalid) {
                    control.markAsDirty();
                }
            }
        }
    }
}
PoPageJobSchedulerBaseComponent.ɵfac = function PoPageJobSchedulerBaseComponent_Factory(t) { return new (t || PoPageJobSchedulerBaseComponent)(i0.ɵɵdirectiveInject(i1.PoPageJobSchedulerService)); };
PoPageJobSchedulerBaseComponent.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoPageJobSchedulerBaseComponent, inputs: { breadcrumb: ["p-breadcrumb", "breadcrumb"], serviceApi: ["p-service-api", "serviceApi"], title: ["p-title", "title"], parameters: ["p-parameters", "parameters"], value: ["p-value", "value"], stepperDefaultOrientation: ["p-orientation", "stepperDefaultOrientation"] } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoPageJobSchedulerBaseComponent, [{
        type: Directive
    }], function () { return [{ type: i1.PoPageJobSchedulerService }]; }, { breadcrumb: [{
            type: Input,
            args: ['p-breadcrumb']
        }], serviceApi: [{
            type: Input,
            args: ['p-service-api']
        }], title: [{
            type: Input,
            args: ['p-title']
        }], parameters: [{
            type: Input,
            args: ['p-parameters']
        }], value: [{
            type: Input,
            args: ['p-value']
        }], stepperDefaultOrientation: [{
            type: Input,
            args: ['p-orientation']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGVtcGxhdGVzL3NyYy9saWIvY29tcG9uZW50cy9wby1wYWdlLWpvYi1zY2hlZHVsZXIvcG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBRTVELE9BQU8sRUFBb0Msb0JBQW9CLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUc5RixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUU5RSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sTUFBTSxDQUFDOzs7QUFFcEM7Ozs7Ozs7Ozs7R0FVRztBQUVILE1BQU0sT0FBTywrQkFBK0I7SUFvTDFDLFlBQXNCLHlCQUFvRDtRQUFwRCw4QkFBeUIsR0FBekIseUJBQXlCLENBQTJCO1FBbkwxRSxnREFBZ0Q7UUFDekIsZUFBVSxHQUFrQixFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQztRQTRJakU7Ozs7O1dBS0c7UUFDb0IsZUFBVSxHQUE4QixFQUFFLENBQUM7UUEyQmxFLFVBQUssR0FBMkIsSUFBSSwwQkFBMEIsRUFBRSxDQUFDO1FBRXpELGtCQUFhLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUdrQyxDQUFDO0lBOUI5RSxJQUFzQixLQUFLLENBQUMsS0FBVTtRQUNwQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRUQ7Ozs7Ozs7Ozs7O09BV0c7SUFFSCxJQUE0Qix5QkFBeUIsQ0FBQyxLQUEyQjtRQUMvRSxJQUFJLENBQUMsWUFBWSxHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ3JHLENBQUM7SUFFRCxJQUFJLHlCQUF5QjtRQUMzQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQztJQVNELFdBQVc7UUFDVCxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFUyxRQUFRLENBQUMsRUFBbUI7UUFDcEMsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNQLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLDBCQUEwQixFQUFFLENBQUM7WUFDNUQsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQ3BCLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUN0RCxDQUFDLFFBQWdDLEVBQUUsRUFBRTtZQUNuQyxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztRQUN4QixDQUFDLEVBQ0QsR0FBRyxFQUFFO1lBQ0gsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLDBCQUEwQixFQUFFLENBQUM7UUFDaEQsQ0FBQyxDQUNGLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFUywwQkFBMEIsQ0FBQyxRQUE0QztRQUMvRSxLQUFLLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBRTtZQUMxQixJQUFJLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2hDLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFOUIsSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFO29CQUNuQixPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7aUJBQ3ZCO2FBQ0Y7U0FDRjtJQUNILENBQUM7OzhHQXROVSwrQkFBK0I7a0ZBQS9CLCtCQUErQjt1RkFBL0IsK0JBQStCO2NBRDNDLFNBQVM7NEVBR2UsVUFBVTtrQkFBaEMsS0FBSzttQkFBQyxjQUFjO1lBdUlHLFVBQVU7a0JBQWpDLEtBQUs7bUJBQUMsZUFBZTtZQUdKLEtBQUs7a0JBQXRCLEtBQUs7bUJBQUMsU0FBUztZQVFPLFVBQVU7a0JBQWhDLEtBQUs7bUJBQUMsY0FBYztZQUVDLEtBQUs7a0JBQTFCLEtBQUs7bUJBQUMsU0FBUztZQWlCWSx5QkFBeUI7a0JBQXBELEtBQUs7bUJBQUMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFic3RyYWN0Q29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IElucHV0LCBEaXJlY3RpdmUsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBQb0JyZWFkY3J1bWIsIFBvRHluYW1pY0Zvcm1GaWVsZCwgUG9TdGVwcGVyT3JpZW50YXRpb24gfSBmcm9tICdAcG8tdWkvbmctY29tcG9uZW50cyc7XG5cbmltcG9ydCB7IFBvSm9iU2NoZWR1bGVySW50ZXJuYWwgfSBmcm9tICcuL2ludGVyZmFjZXMvcG8tam9iLXNjaGVkdWxlci1pbnRlcm5hbC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwgfSBmcm9tICcuL3BvLXBhZ2Utam9iLXNjaGVkdWxlci1pbnRlcm5hbCc7XG5pbXBvcnQgeyBQb1BhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlIH0gZnJvbSAnLi9wby1wYWdlLWpvYi1zY2hlZHVsZXIuc2VydmljZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBPIGBwby1wYWdlLWpvYi1zY2hlZHVsZXJgIMOpIHVtYSBww6FnaW5hIHBhcmEgY3JpYcOnw6NvIGUgYXR1YWxpemHDp8OjbyBkZSBhZ2VuZGFtZW50b3MgZGEgZXhlY3XDp8OjbyBkZSBwcm9jZXNzb3MgKEpvYiBTY2hlZHVsZXIpLFxuICogY29tbyBwb3IgZXhlbXBsbzogYSBnZXJhw6fDo28gZGEgZm9saGEgZGUgcGFnYW1lbnRvIGRvcyBmdW5jaW9uw6FyaW9zLlxuICpcbiAqIFBhcmEgdXRpbGl6YXIgZXN0YSBww6FnaW5hLCBiYXN0YSBpbmZvcm1hciBvIHNlcnZpw6dvIChlbmRwb2ludCkgcGFyYSBjb25zdW1vLFxuICogc2VtIGEgbmVjZXNzaWRhZGUgZGUgY3JpYXIgY29tcG9uZW50ZXMgZSB0cmF0YW1lbnRvcyBkb3MgZGFkb3MuXG4gKlxuICogVmVqYSBtYWlzIHNvYnJlIG9zIHBhZHLDtWVzIHV0aWxpemFkb3MgbmFzIHJlcXVpc2nDp8O1ZXMgbm8gW0d1aWEgZGUgaW1wbGVtZW50YcOnw6NvIGRlIEFQSXNdKGd1aWRlcy9hcGkpLlxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBjbGFzcyBQb1BhZ2VKb2JTY2hlZHVsZXJCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcbiAgLyoqIE9iamV0byBjb20gYXMgcHJvcHJpZWRhZGVzIGRvIGJyZWFkY3J1bWIuICovXG4gIEBJbnB1dCgncC1icmVhZGNydW1iJykgYnJlYWRjcnVtYj86IFBvQnJlYWRjcnVtYiA9IHsgaXRlbXM6IFtdIH07XG5cbiAgLyoqXG4gICAqIEVuZHBvaW50IHVzYWRvIHBlbG8gY29tcG9uZW50ZSBwYXJhIGJ1c2NhIGRvcyBwcm9jZXNzb3MgZSBwYXLDom1ldHJvcyBxdWUgc2Vyw6NvIHV0aWxpemFkb3MgcGFyYSBjcmlhw6fDo28gZSBlZGnDp8OjbyBkb3MgYWdlbmRhbWVudG9zLlxuICAgKlxuICAgKiAjIyMjIFByb2Nlc3Nvc1xuICAgKlxuICAgKiBPcyBwcm9jZXNzb3Mgc8OjbyBhcyB0YXJlZmFzIHF1ZSBlc3RhcsOjbyBkaXNwb27DrXZlaXMgcGFyYSBvIHVzdcOhcmlvIHBvZGVyIGZhemVyIG9zIGFnZW5kYW1lbnRvcy5cbiAgICogQW8gaW5pY2lhbGl6YXIgbyBjb21wb25lbnRlLCBzZXLDoSBmZWl0byB1bWEgcmVxdWlzacOnw6NvIGBHRVRgIHBhcmEgbyBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgLCBwYXJhIGJ1c2NhclxuICAgKiBlc3NhIGxpc3RhIGRlIHByb2Nlc3Nvcy5cbiAgICpcbiAgICogRXN0ZSBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgIGRldmUgcmV0b3JuYXIgdW1hIGxpc3RhIGRlIG9iamV0b3MgcXVlIHNlZ3VlbSBhIGRlZmluacOnw6NvIGRlIGRhZG9zIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIEdFVCB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc1xuICAgKiBgYGBcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBpdGVtczogW1xuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImFjNGZcIiwgXCJkZXNjcmlwdGlvblwiOiBcIkdlcmFyIGZvbGhhIGRlIHBhZ2FtZW50b1wiIH0sXG4gICAqICAgICB7IFwicHJvY2Vzc0lEXCI6IFwiZGY2bFwiLCBcImRlc2NyaXB0aW9uXCI6IFwiUmVsYXTDs3JpbyBkZSBpbXBvc3RvIGEgcmVjb2xoZXJcIiB9LFxuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImRrM3BcIiwgXCJkZXNjcmlwdGlvblwiOiBcIlTDrXR1bG9zIGVtIGFiZXJ0b1wiIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBEZXN0YSBmb3JtYSBzZXLDoSByZW5kZXJpemFkbyB1bSBjb21wb25lbnRlIHBhcmEgc2VsZWNpb25hciBvIHByb2Nlc3NvIGUvb3UgZmlsdHLDoS1sb3MuXG4gICAqXG4gICAqIFBhcmEgcmVhbGl6YXIgbyBmaWx0cm8gZGUgYnVzY2EgZG8gcHJvY2Vzc28sIHNlcsOhIGZlaXRhIHVtYSByZXF1aXNpw6fDo28gZW52aWFuZG8gbyBjb250ZcO6ZG8gZGlnaXRhZG8gbmEgYnVzY2EgYXRyYXbDqXMgZG9cbiAgICogcGFyw6JtZXRybyBgc2VhcmNoYC4gRGEgc2VndWludGUgZm9ybWE6XG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXM/c2VhcmNoPXJlbGF0b3Jpb1xuICAgKiBgYGBcbiAgICpcbiAgICogPiBWZWphIG1haXMgc29icmUgcGFnaW5hw6fDo28gZSBmaWx0cm9zIG5vIFtHdWlhIGRlIGltcGxlbWVudGHDp8OjbyBkZSBBUElzXShndWlkZXMvYXBpKS5cbiAgICogQ2FzbyBzZWphIGluZm9ybWFkYSBhIHByb3ByaWVkYWRlIGBwLXBhcmFtZXRlcnNgIG7Do28gc2Vyw6NvIHJlYWxpemFkYXMgYXMgcmVxdWlzacOnw7VlcyBkZSBwcm9jZXNzb3MgZSBuZW0gZGUgcGFyYW1ldHJvcyBhdXRvbWF0aWNhbWVudGUuXG4gICAqXG4gICAqIFRhbWLDqW0gw6kgcG9zc8OtdmVsIGZhemVyIHVtIGFnZW5kYW1lbnRvIGRlIHVtIHByb2Nlc3NvIGVzcGVjw61maWNvLCBzZW0gcXVlIHNlamEgbmVjZXNzw6FyaW8gdW0gZW5kcG9pbnQgcGFyYSBidXNjYSBkZXNzZXNcbiAgICogcHJvY2Vzc29zLiBFbnTDo28sIGNhc28gbyBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgIG7Do28gc2VqYSB2w6FsaWRvLCBzZXLDoSBhcHJlc2VudGFkbyB1bSBjYW1wbyBkZSBlbnRyYWRhIGRlXG4gICAqIHRleHRvIHBhcmEgbyB1c3XDoXJpbyBpbmZvcm1hciBkaXJldGFtZW50ZVxuICAgKiBvICoqaWRlbnRpZmljYWRvciBkbyBwcm9jZXNzbyAtIGBwcm9jZXNzSURgKiogZSBhbyBzYWx2YXIgc2Vyw6EgZW52aWFkbyB1bSBgUE9TVGAgcGFyYSBvIGVuZHBvaW50IGRpZmluaWRvIGBzZXJ2aWNlQXBpYCBjb25mb3JtZSBhYmFpeG86XG4gICAqXG4gICAqIGBgYFxuICAgKiBQT1NUIHtzZXJ2aWNlLWFwaX1cbiAgICogYGBgXG4gICAqXG4gICAqICpSZXF1ZXN0IHBheWxvYWQqIC0gZXN0cnV0dXJhIGRlIGRhZG9zIGVudmlhZGEgbm8gY29ycG8gZGEgcmVxdWlzacOnw6NvIGNvbmZvcm1lIGludGVyZmFjZSBgUG9Kb2JTY2hlZHVsZXJgOlxuICAgKlxuICAgKiBgYGBcbiAgICoge1xuICAgKiAgIFwiZGFpbHlcIjogeyBcImhvdXJcIjogMTAsIFwibWludXRlXCI6IDEyIH0sXG4gICAqICAgXCJmaXJzdEV4ZWN1dGlvblwiOiBcIjIwMTgtMTItMDdUMDA6MDA6MDEtMDA6MDBcIixcbiAgICogICBcInJlY3VycmVudFwiOiB0cnVlLFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCJcbiAgICogICAuLi5cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQ2FzbyBzZWphIG5lY2Vzc8OhcmlvIGluZm9ybWFyIHBhcsOibWV0cm9zIGUgYWRpY2lvbmFyIGNvbmZpZ3VyYcOnw7VlcyBubyBwcm9jZXNzbyBzZWxlY2lvbmFkbywgc2Vyw6EgcmVhbGl6YWRvIHVtIGBHRVRgXG4gICAqIGNvbW8gZXhlbXBsaWZpY2FkbyBhYmFpeG8uIE9zIHBhcsOibWV0cm9zIGRldmVtIHJldG9ybmFyIHVtYSBsaXN0YSBkZSBvYmpldG9zIHF1ZSBzZWd1ZW0gYSBpbnRlcmZhY2VcbiAgICogW1BvRHluYW1pY0Zvcm1GaWVsZF0oL2RvY3VtZW50YXRpb24vcG8tZHluYW1pYy1mb3JtKS4gUG9yw6ltLCBjYXNvIHV0aWxpemFyIGEgcHJvcHJpZWRhZGUgYHAtcGFyYW1ldGVyc2AgbyBjb21wb25lbnRlIG7Do29cbiAgICogcmVhbGl6YXLDoSBhIGJ1c2NhIGF1dG9tw6F0aWNhIGUgbyBjYW1wbyBkZSBwcm9jZXNzb3MgbsOjbyBzZXLDoSBleGliaWRvLlxuICAgKlxuICAgKiBgYGBcbiAgICogR0VUIHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzLzppZC9wYXJhbWV0ZXJzXG4gICAqIC4uLlxuICAgKiB7XG4gICAqICAgaXRlbXM6IFtcbiAgICogICAgIHsgXCJwcm9wZXJ0eVwiOiBcInZlbmNpbWVudG9cIiwgdHlwZTogXCJkYXRlXCIgfSxcbiAgICogICAgIHsgXCJwcm9wZXJ0eVwiOiBcImltcG9zdG8tcmV0aWRvXCIsIFwibGFiZWxcIjogXCJJbXBvc3RvIFJldGlkb1wiLCB0eXBlOiBcImJvb2xlYW5cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIFNhbHZhciBlIEF0dWFsaXphclxuICAgKlxuICAgKiBQYXJhIHNhbHZhciBvIGFnZW5kYW1lbnRvLCBzZXLDoSBmZWl0YSB1bWEgcmVxdWlzacOnw6NvIGRlIGNyaWHDp8OjbywgcGFzc2FuZG8gb3MgdmFsb3JlcyBwcmVlbmNoaWRvcyBwZWxvIHVzdcOhcmlvIHZpYSAqcGF5bG9hZCouXG4gICAqIEFiYWl4byB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBkaXNwYXJhZGEsIG9uZGUgYXMgcHJvcHJpZWRhZGVzIGRvICpKb2IgU2NoZWR1bGVyKiBmb3JhbSBwcmVlbmNoaWRhczpcbiAgICpcbiAgICogYGBgXG4gICAqICBQT1NUIHtzZXJ2aWNlLWFwaX1cbiAgICogYGBgXG4gICAqXG4gICAqICpSZXF1ZXN0IHBheWxvYWQqIC0gZXN0cnV0dXJhIGRlIGRhZG9zIGVudmlhZGEgbm8gY29ycG8gZGEgcmVxdWlzacOnw6NvIGNvbmZvcm1lIGludGVyZmFjZSBgUG9Kb2JTY2hlZHVsZXJgOlxuICAgKlxuICAgKiBgYGBcbiAgICoge1xuICAgKiAgIFwiZmlyc3RFeGVjdXRpb25cIjogXCIyMDE4LTEyLTA3VDAwOjAwOjAxLTAwOjAwXCIsXG4gICAqICAgXCJyZWN1cnJlbnRcIjogdHJ1ZSxcbiAgICogICBcIm1vbnRobHlcIjogeyBcImRheVwiOiAxLCBcImhvdXJcIjogMTAsIFwibWludXRlXCI6IDAgfSxcbiAgICogICBcInByb2Nlc3NJRFwiOiBcImFjMDQwNVwiLFxuICAgKiAgIFwicmFuZ2VFeGVjdXRpb25zOiB7IFwiZnJlcXVlbmN5XCI6IHsgXCJ0eXBlXCI6IFwiaG91clwiLCBcInZhbHVlXCI6IDIgfSwgXCJyYW5nZUxpbWl0XCI6IHsgXCJob3VyXCI6IDE4LCBcIm1pbnV0ZVwiOiAwLCBcImRheVwiOiAyMCB9IH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQ2FzbyBxdWVpcmEgcXVlIG8gY29tcG9uZW50ZSBjYXJyZWd1ZSB1bSBhZ2VuZGFtZW50byBqw6EgZXhpc3RlbnRlLCBkZXZlIHNlciBpbmNsdcOtZG8gdW0gcGFyw6JtZXRybyBuYSByb3RhIGNoYW1hZG8gYGlkYC5cbiAgICpcbiAgICogRXhlbXBsbyBkZSBjb25maWd1cmHDp8OjbyBkZSByb3RhOlxuICAgKlxuICAgKiBgYGBcbiAgICogIFJvdXRlck1vZHVsZS5mb3JSb290KFtcbiAgICogICAgLi4uXG4gICAqICAgIHsgcGF0aDogJ2VkaXQvOmlkJywgY29tcG9uZW50OiBFeGFtcGxlSm9iU2NoZWR1bGVyQ29tcG9uZW50IH0sXG4gICAqICAgIC4uLlxuICAgKiAgXSxcbiAgICogYGBgXG4gICAqXG4gICAqIEJhc2VhZG8gbmlzc28sIG5hIGluaWNpYWxpemHDp8OjbyBkbyB0ZW1wbGF0ZSBzZXLDoSBkaXNwYXJhZG8gdW1hIHJlcXVpc2nDp8OjbyBwYXJhIGJ1c2NhciBvIHJlY3Vyc28gcXVlIHNlcsOhIGVkaXRhZG8uXG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS97aWR9XG4gICAqIGBgYFxuICAgKlxuICAgKiBBbyBhdHVhbGl6YXIgbyBhZ2VuZGFtZW50bywgc2Vyw6EgZGlzcGFyYWRvIHVtIGBQVVRgIGNvbSBvcyBkYWRvcyBwcmVlbmNoaWRvcy5cbiAgICogVmVqYSBhYmFpeG8gdW1hIHJlcXVpc2nDp8OjbyBgUFVUYCBkaXNwYXJhZGEsIG9uZGUgYSBwcm9wcmllZGFkZSAqcmVjdXJyZW50KiBlICpkYWlseSogZm9yYW0gYXR1YWxpemFkYXM6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgUFVUIHtzZXJ2aWNlLWFwaX0ve2lkfVxuICAgKiBgYGBcbiAgICpcbiAgICogKlJlcXVlc3QgcGF5bG9hZCogLSBlc3RydXR1cmEgZGUgZGFkb3MgZW52aWFkYSBubyBjb3JwbyBkYSByZXF1aXNpw6fDo28gY29uZm9ybWUgaW50ZXJmYWNlIGBQb0pvYlNjaGVkdWxlcmA6XG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJmaXJzdEV4ZWN1dGlvblwiOiBcIjIwMTgtMTItMDdUMDA6MDA6MDEtMDA6MDBcIixcbiAgICogICBcInJlY3VycmVudFwiOiB0cnVlLFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCIsXG4gICAqICAgXCJtb250aGx5XCI6IHsgXCJkYXlcIjogMSwgXCJob3VyXCI6IDEwLCBcIm1pbnV0ZVwiOiAwIH0sXG4gICAqICAgXCJwcm9jZXNzSURcIjogXCJhYzA0MDVcIixcbiAgICogICBcInJhbmdlRXhlY3V0aW9uczogeyBcImZyZXF1ZW5jeVwiOiB7IFwidHlwZVwiOiBcImhvdXJcIiwgXCJ2YWx1ZVwiOiAyIH0sIFwicmFuZ2VMaW1pdFwiOiB7IFwiaG91clwiOiAxOCwgXCJtaW51dGVcIjogMCwgXCJkYXlcIjogMjAgfSB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBASW5wdXQoJ3Atc2VydmljZS1hcGknKSBzZXJ2aWNlQXBpOiBzdHJpbmc7XG5cbiAgLyoqIFTDrXR1bG8gZGEgcMOhZ2luYS4gKi9cbiAgQElucHV0KCdwLXRpdGxlJykgdGl0bGU6IHN0cmluZztcblxuICAvKipcbiAgICogUGFyw6JtZXRyb3MgcXVlIHNlcsOjbyB1dGlsaXphZG9zIHBhcmEgY3JpYcOnw6NvIGUgZWRpw6fDo28gZG9zIGFnZW5kYW1lbnRvcy5cbiAgICpcbiAgICogQW8gdXRpbGl6YXIgZXN0YSBwcm9wcmllZGFkZSwgbyBjb21wb25lbnRlIG7Do28gYnVzY2Fyw6EgYXV0b21hdGljYW1lbnRlIG9zIHBhcsOibWV0cm9zIGRhIEFQSSBlIG8gY2FtcG8gcGFyYSBwcmVlbmNoaW1lbnRvIGRvIHByb2Nlc3NvIG7Do28gc2Vyw6EgZXhpYmlkby5cbiAgICpcbiAgICovXG4gIEBJbnB1dCgncC1wYXJhbWV0ZXJzJykgcGFyYW1ldGVyczogQXJyYXk8UG9EeW5hbWljRm9ybUZpZWxkPiA9IFtdO1xuXG4gIEBJbnB1dCgncC12YWx1ZScpIHNldCB2YWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5tb2RlbCA9IHRoaXMucG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZS5jb252ZXJ0VG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgYSBvcmllbnRhw6fDo28gZGUgZXhpYmnDp8OjbyBkbyBgcG8tc3RlcHBlcmAuXG4gICAqXG4gICAqID4gUXVhbmRvIG7Do28gdXRpbGl6YWRhLCBzZWd1ZSBvIGNvbXBvcnRhbWVudG8gY29tIGJhc2UgbmFzIGRpbWVuc8O1ZXMgZGEgdGVsYS5cbiAgICpcbiAgICogPiBWZWphIG9zIHZhbG9yZXMgdsOhbGlkb3Mgbm8gKmVudW0qIFtQb1N0ZXBwZXJPcmllbnRhdGlvbl0oZG9jdW1lbnRhdGlvbi9wby1zdGVwcGVyI3N0ZXBwZXJPcmllbnRhdGlvbikuXG4gICAqXG4gICAqL1xuXG4gIEBJbnB1dCgncC1vcmllbnRhdGlvbicpIHNldCBzdGVwcGVyRGVmYXVsdE9yaWVudGF0aW9uKHZhbHVlOiBQb1N0ZXBwZXJPcmllbnRhdGlvbikge1xuICAgIHRoaXMuX29yaWVudGF0aW9uID0gKDxhbnk+T2JqZWN0KS52YWx1ZXMoUG9TdGVwcGVyT3JpZW50YXRpb24pLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0IHN0ZXBwZXJEZWZhdWx0T3JpZW50YXRpb24oKTogUG9TdGVwcGVyT3JpZW50YXRpb24ge1xuICAgIHJldHVybiB0aGlzLl9vcmllbnRhdGlvbjtcbiAgfVxuXG4gIG1vZGVsOiBQb0pvYlNjaGVkdWxlckludGVybmFsID0gbmV3IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsKCk7XG5cbiAgcHJpdmF0ZSBfc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIF9vcmllbnRhdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZTogUG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZSkge31cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBsb2FkRGF0YShpZDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgdGhpcy5tb2RlbCA9IHRoaXMubW9kZWwgfHwgbmV3IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uLmFkZChcbiAgICAgIHRoaXMucG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZS5nZXRSZXNvdXJjZShpZCkuc3Vic2NyaWJlKFxuICAgICAgICAocmVzcG9uc2U6IFBvSm9iU2NoZWR1bGVySW50ZXJuYWwpID0+IHtcbiAgICAgICAgICB0aGlzLm1vZGVsID0gcmVzcG9uc2U7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLm1vZGVsID0gbmV3IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsKCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1hcmtBc0RpcnR5SW52YWxpZENvbnRyb2xzKGNvbnRyb2xzOiB7IFtrZXk6IHN0cmluZ106IEFic3RyYWN0Q29udHJvbCB9KSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY29udHJvbHMpIHtcbiAgICAgIGlmIChjb250cm9scy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSBjb250cm9sc1trZXldO1xuXG4gICAgICAgIGlmIChjb250cm9sLmludmFsaWQpIHtcbiAgICAgICAgICBjb250cm9sLm1hcmtBc0RpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==