import { Component, forwardRef, Output, EventEmitter, Input } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { poLocaleDefault } from '../../../services/po-language/po-language.constant';
import { PoCheckboxGroupComponent } from '../../po-field/po-checkbox-group/po-checkbox-group.component';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/po-language/po-language.service";
import * as i2 from "@angular/common";
import * as i3 from "../../po-button/po-button.component";
import * as i4 from "../../../directives/po-tooltip/po-tooltip.directive";
import * as i5 from "../../po-field/po-checkbox/po-checkbox.component";
function PoTableListManagerComponent_li_0_Template(rf, ctx) { if (rf & 1) {
    const _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 1)(1, "div", 2)(2, "po-checkbox", 3, 4);
    i0.ɵɵlistener("click", function PoTableListManagerComponent_li_0_Template_po_checkbox_click_2_listener() { const restoredCtx = i0.ɵɵrestoreView(_r4); const option_r1 = restoredCtx.$implicit; const ctx_r3 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r3.checkOption(option_r1)); })("keydown", function PoTableListManagerComponent_li_0_Template_po_checkbox_keydown_2_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r4); const option_r1 = restoredCtx.$implicit; const ctx_r5 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r5.onKeyDown($event, option_r1)); });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 5)(5, "po-button", 6);
    i0.ɵɵlistener("click", function PoTableListManagerComponent_li_0_Template_po_button_click_5_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r4); const option_r1 = restoredCtx.$implicit; const ctx_r6 = i0.ɵɵnextContext(); ctx_r6.emitChangePosition(option_r1, "up"); return i0.ɵɵresetView($event.stopPropagation()); });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "po-button", 7);
    i0.ɵɵlistener("click", function PoTableListManagerComponent_li_0_Template_po_button_click_6_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r4); const option_r1 = restoredCtx.$implicit; const ctx_r7 = i0.ɵɵnextContext(); ctx_r7.emitChangePosition(option_r1, "down"); return i0.ɵɵresetView($event.stopPropagation()); });
    i0.ɵɵelementEnd()()()();
} if (rf & 2) {
    const option_r1 = ctx.$implicit;
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("po-checkbox-group-item-disabled", option_r1.disabled || ctx_r0.disabled);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("p-label", option_r1.label)("p-disabled", option_r1.disabled || ctx_r0.disabled)("p-checkboxValue", ctx_r0.checkedOptions[option_r1.value] === null ? "mixed" : ctx_r0.checkedOptions[option_r1.value])("p-required", ctx_r0.required);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("p-tooltip", ctx_r0.literals.up)("p-disabled", ctx_r0.verifyArrowDisabled(option_r1, "up"));
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("p-tooltip", ctx_r0.literals.down)("p-disabled", ctx_r0.verifyArrowDisabled(option_r1, "down"));
} }
export const poTableListManagerLiterals = {
    en: {
        up: 'up',
        down: 'down'
    },
    es: {
        up: 'arriba',
        down: 'abajo'
    },
    pt: {
        up: 'acima',
        down: 'abaixo'
    },
    ru: {
        up: 'вверх',
        down: 'вниз'
    }
};
export class PoTableListManagerComponent extends PoCheckboxGroupComponent {
    constructor(languageService, changeDetector) {
        super(changeDetector);
        this.changePosition = new EventEmitter();
        const language = languageService.getShortLanguage();
        this.literals = {
            ...poTableListManagerLiterals[poLocaleDefault],
            ...poTableListManagerLiterals[language]
        };
    }
    emitChangePosition(option, direction) {
        const infoPosition = { option, direction };
        const hasDisabled = this.verifyArrowDisabled(option, direction);
        if (!hasDisabled) {
            this.changePosition.emit(infoPosition);
        }
    }
    verifyArrowDisabled(option, direction) {
        const index = this.columnsManager.findIndex(el => el.property === option.value);
        const existsDetail = this.columnsManager.some(function (el) {
            return el.property === 'detail';
        });
        const valueSubtraction = existsDetail ? 2 : 1;
        if (index === 0 && direction === 'up') {
            return true;
        }
        if (index === this.columnsManager.length - valueSubtraction && direction === 'down') {
            return true;
        }
        return false;
    }
}
PoTableListManagerComponent.ɵfac = function PoTableListManagerComponent_Factory(t) { return new (t || PoTableListManagerComponent)(i0.ɵɵdirectiveInject(i1.PoLanguageService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };
PoTableListManagerComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoTableListManagerComponent, selectors: [["po-table-list-manager"]], inputs: { columnsManager: ["p-columns-manager", "columnsManager"] }, outputs: { changePosition: "p-change-position" }, features: [i0.ɵɵProvidersFeature([
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => PoTableListManagerComponent),
                multi: true
            }
        ]), i0.ɵɵInheritDefinitionFeature], decls: 1, vars: 2, consts: [["class", "po-table-list-manager-container", 3, "po-checkbox-group-item-disabled", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "po-table-list-manager-container"], [1, "po-table-list-manager-item"], [3, "p-label", "p-disabled", "p-checkboxValue", "p-required", "click", "keydown"], ["checkboxLabel", ""], [1, "po-container-icons-arrows-columns-manager"], ["p-tooltip-position", "left", "p-kind", "tertiary", "p-icon", "po-icon po-icon-arrow-up", 3, "p-tooltip", "p-disabled", "click"], ["p-tooltip-position", "top", "p-kind", "tertiary", "p-icon", "po-icon po-icon-arrow-down", 3, "p-tooltip", "p-disabled", "click"]], template: function PoTableListManagerComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵtemplate(0, PoTableListManagerComponent_li_0_Template, 7, 10, "li", 0);
    } if (rf & 2) {
        i0.ɵɵproperty("ngForOf", ctx.checkboxGroupOptionsView)("ngForTrackBy", ctx.trackByFn);
    } }, dependencies: [i2.NgForOf, i3.PoButtonComponent, i4.PoTooltipDirective, i5.PoCheckboxComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoTableListManagerComponent, [{
        type: Component,
        args: [{ selector: 'po-table-list-manager', providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(() => PoTableListManagerComponent),
                        multi: true
                    }
                ], template: "<li\n  class=\"po-table-list-manager-container\"\n  *ngFor=\"let option of checkboxGroupOptionsView; trackBy: trackByFn\"\n  [class.po-checkbox-group-item-disabled]=\"option.disabled || disabled\"\n>\n  <div class=\"po-table-list-manager-item\">\n    <po-checkbox\n      #checkboxLabel\n      [p-label]=\"option.label\"\n      [p-disabled]=\"option.disabled || disabled\"\n      (click)=\"checkOption(option)\"\n      (keydown)=\"onKeyDown($event, option)\"\n      [p-checkboxValue]=\"checkedOptions[option.value] === null ? 'mixed' : checkedOptions[option.value]\"\n      [p-required]=\"required\"\n    >\n    </po-checkbox>\n    <div class=\"po-container-icons-arrows-columns-manager\">\n      <po-button\n        [p-tooltip]=\"literals.up\"\n        p-tooltip-position=\"left\"\n        p-kind=\"tertiary\"\n        p-icon=\"po-icon po-icon-arrow-up\"\n        [p-disabled]=\"verifyArrowDisabled(option, 'up')\"\n        (click)=\"emitChangePosition(option, 'up'); $event.stopPropagation()\"\n      >\n      </po-button>\n\n      <po-button\n        [p-tooltip]=\"literals.down\"\n        p-tooltip-position=\"top\"\n        p-kind=\"tertiary\"\n        p-icon=\"po-icon po-icon-arrow-down\"\n        [p-disabled]=\"verifyArrowDisabled(option, 'down')\"\n        (click)=\"emitChangePosition(option, 'down'); $event.stopPropagation()\"\n      >\n      </po-button>\n    </div>\n  </div>\n</li>\n" }]
    }], function () { return [{ type: i1.PoLanguageService }, { type: i0.ChangeDetectorRef }]; }, { changePosition: [{
            type: Output,
            args: ['p-change-position']
        }], columnsManager: [{
            type: Input,
            args: ['p-columns-manager']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdGFibGUtbGlzdC1tYW5hZ2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby10YWJsZS9wby10YWJsZS1saXN0LW1hbmFnZXIvcG8tdGFibGUtbGlzdC1tYW5hZ2VyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby10YWJsZS9wby10YWJsZS1saXN0LW1hbmFnZXIvcG8tdGFibGUtbGlzdC1tYW5hZ2VyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUN0RyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUluRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0RBQW9ELENBQUM7QUFDckYsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sOERBQThELENBQUM7Ozs7Ozs7OztJQ054Ryw2QkFJQyxhQUFBLHdCQUFBO0lBTUsseU9BQVMsZUFBQSw2QkFBbUIsQ0FBQSxJQUFDLHNPQUNsQixlQUFBLG1DQUF5QixDQUFBLElBRFA7SUFLL0IsaUJBQWM7SUFDZCw4QkFBdUQsbUJBQUE7SUFPbkQsc09BQVMscUNBQTJCLElBQUksQ0FBQyxTQUFFLGVBQUEsd0JBQXdCLENBQUEsSUFBQztJQUV0RSxpQkFBWTtJQUVaLG9DQU9DO0lBREMsc09BQVMscUNBQTJCLE1BQU0sQ0FBQyxTQUFFLGVBQUEsd0JBQXdCLENBQUEsSUFBQztJQUV4RSxpQkFBWSxFQUFBLEVBQUEsRUFBQTs7OztJQWhDaEIsd0ZBQXFFO0lBS2pFLGVBQXdCO0lBQXhCLHlDQUF3QixxREFBQSx1SEFB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QWM7a0JBRHJCLE1BQU07bUJBQUMsbUJBQW1CO1lBR0MsY0FBYztrQkFBekMsS0FBSzttQkFBQyxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIGZvcndhcmRSZWYsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBQb1RhYmxlQ29sdW1uIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wby10YWJsZS1jb2x1bW4uaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcG8tbGFuZ3VhZ2UvcG8tbGFuZ3VhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBwb0xvY2FsZURlZmF1bHQgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5jb25zdGFudCc7XG5pbXBvcnQgeyBQb0NoZWNrYm94R3JvdXBDb21wb25lbnQgfSBmcm9tICcuLi8uLi9wby1maWVsZC9wby1jaGVja2JveC1ncm91cC9wby1jaGVja2JveC1ncm91cC5jb21wb25lbnQnO1xuXG5leHBvcnQgY29uc3QgcG9UYWJsZUxpc3RNYW5hZ2VyTGl0ZXJhbHMgPSB7XG4gIGVuOiB7XG4gICAgdXA6ICd1cCcsXG4gICAgZG93bjogJ2Rvd24nXG4gIH0sXG4gIGVzOiB7XG4gICAgdXA6ICdhcnJpYmEnLFxuICAgIGRvd246ICdhYmFqbydcbiAgfSxcbiAgcHQ6IHtcbiAgICB1cDogJ2FjaW1hJyxcbiAgICBkb3duOiAnYWJhaXhvJ1xuICB9LFxuICBydToge1xuICAgIHVwOiAn0LLQstC10YDRhScsXG4gICAgZG93bjogJ9Cy0L3QuNC3J1xuICB9XG59O1xuXG50eXBlIERpcmVjdGlvbiA9ICd1cCcgfCAnZG93bic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLXRhYmxlLWxpc3QtbWFuYWdlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby10YWJsZS1saXN0LW1hbmFnZXIuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFBvVGFibGVMaXN0TWFuYWdlckNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBQb1RhYmxlTGlzdE1hbmFnZXJDb21wb25lbnQgZXh0ZW5kcyBQb0NoZWNrYm94R3JvdXBDb21wb25lbnQge1xuICBAT3V0cHV0KCdwLWNoYW5nZS1wb3NpdGlvbicpXG4gIHByaXZhdGUgY2hhbmdlUG9zaXRpb24gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBASW5wdXQoJ3AtY29sdW1ucy1tYW5hZ2VyJykgY29sdW1uc01hbmFnZXI6IEFycmF5PFBvVGFibGVDb2x1bW4+O1xuXG4gIGxpdGVyYWxzO1xuXG4gIGNvbnN0cnVjdG9yKGxhbmd1YWdlU2VydmljZTogUG9MYW5ndWFnZVNlcnZpY2UsIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICAgIHN1cGVyKGNoYW5nZURldGVjdG9yKTtcblxuICAgIGNvbnN0IGxhbmd1YWdlID0gbGFuZ3VhZ2VTZXJ2aWNlLmdldFNob3J0TGFuZ3VhZ2UoKTtcblxuICAgIHRoaXMubGl0ZXJhbHMgPSB7XG4gICAgICAuLi5wb1RhYmxlTGlzdE1hbmFnZXJMaXRlcmFsc1twb0xvY2FsZURlZmF1bHRdLFxuICAgICAgLi4ucG9UYWJsZUxpc3RNYW5hZ2VyTGl0ZXJhbHNbbGFuZ3VhZ2VdXG4gICAgfTtcbiAgfVxuXG4gIGVtaXRDaGFuZ2VQb3NpdGlvbihvcHRpb24sIGRpcmVjdGlvbjogRGlyZWN0aW9uKSB7XG4gICAgY29uc3QgaW5mb1Bvc2l0aW9uID0geyBvcHRpb24sIGRpcmVjdGlvbiB9O1xuICAgIGNvbnN0IGhhc0Rpc2FibGVkOiBib29sZWFuID0gdGhpcy52ZXJpZnlBcnJvd0Rpc2FibGVkKG9wdGlvbiwgZGlyZWN0aW9uKTtcbiAgICBpZiAoIWhhc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLmNoYW5nZVBvc2l0aW9uLmVtaXQoaW5mb1Bvc2l0aW9uKTtcbiAgICB9XG4gIH1cblxuICB2ZXJpZnlBcnJvd0Rpc2FibGVkKG9wdGlvbiwgZGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY29sdW1uc01hbmFnZXIuZmluZEluZGV4KGVsID0+IGVsLnByb3BlcnR5ID09PSBvcHRpb24udmFsdWUpO1xuICAgIGNvbnN0IGV4aXN0c0RldGFpbCA9IHRoaXMuY29sdW1uc01hbmFnZXIuc29tZShmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHJldHVybiBlbC5wcm9wZXJ0eSA9PT0gJ2RldGFpbCc7XG4gICAgfSk7XG4gICAgY29uc3QgdmFsdWVTdWJ0cmFjdGlvbiA9IGV4aXN0c0RldGFpbCA/IDIgOiAxO1xuXG4gICAgaWYgKGluZGV4ID09PSAwICYmIGRpcmVjdGlvbiA9PT0gJ3VwJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4ID09PSB0aGlzLmNvbHVtbnNNYW5hZ2VyLmxlbmd0aCAtIHZhbHVlU3VidHJhY3Rpb24gJiYgZGlyZWN0aW9uID09PSAnZG93bicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwiPGxpXG4gIGNsYXNzPVwicG8tdGFibGUtbGlzdC1tYW5hZ2VyLWNvbnRhaW5lclwiXG4gICpuZ0Zvcj1cImxldCBvcHRpb24gb2YgY2hlY2tib3hHcm91cE9wdGlvbnNWaWV3OyB0cmFja0J5OiB0cmFja0J5Rm5cIlxuICBbY2xhc3MucG8tY2hlY2tib3gtZ3JvdXAtaXRlbS1kaXNhYmxlZF09XCJvcHRpb24uZGlzYWJsZWQgfHwgZGlzYWJsZWRcIlxuPlxuICA8ZGl2IGNsYXNzPVwicG8tdGFibGUtbGlzdC1tYW5hZ2VyLWl0ZW1cIj5cbiAgICA8cG8tY2hlY2tib3hcbiAgICAgICNjaGVja2JveExhYmVsXG4gICAgICBbcC1sYWJlbF09XCJvcHRpb24ubGFiZWxcIlxuICAgICAgW3AtZGlzYWJsZWRdPVwib3B0aW9uLmRpc2FibGVkIHx8IGRpc2FibGVkXCJcbiAgICAgIChjbGljayk9XCJjaGVja09wdGlvbihvcHRpb24pXCJcbiAgICAgIChrZXlkb3duKT1cIm9uS2V5RG93bigkZXZlbnQsIG9wdGlvbilcIlxuICAgICAgW3AtY2hlY2tib3hWYWx1ZV09XCJjaGVja2VkT3B0aW9uc1tvcHRpb24udmFsdWVdID09PSBudWxsID8gJ21peGVkJyA6IGNoZWNrZWRPcHRpb25zW29wdGlvbi52YWx1ZV1cIlxuICAgICAgW3AtcmVxdWlyZWRdPVwicmVxdWlyZWRcIlxuICAgID5cbiAgICA8L3BvLWNoZWNrYm94PlxuICAgIDxkaXYgY2xhc3M9XCJwby1jb250YWluZXItaWNvbnMtYXJyb3dzLWNvbHVtbnMtbWFuYWdlclwiPlxuICAgICAgPHBvLWJ1dHRvblxuICAgICAgICBbcC10b29sdGlwXT1cImxpdGVyYWxzLnVwXCJcbiAgICAgICAgcC10b29sdGlwLXBvc2l0aW9uPVwibGVmdFwiXG4gICAgICAgIHAta2luZD1cInRlcnRpYXJ5XCJcbiAgICAgICAgcC1pY29uPVwicG8taWNvbiBwby1pY29uLWFycm93LXVwXCJcbiAgICAgICAgW3AtZGlzYWJsZWRdPVwidmVyaWZ5QXJyb3dEaXNhYmxlZChvcHRpb24sICd1cCcpXCJcbiAgICAgICAgKGNsaWNrKT1cImVtaXRDaGFuZ2VQb3NpdGlvbihvcHRpb24sICd1cCcpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxuICAgICAgPlxuICAgICAgPC9wby1idXR0b24+XG5cbiAgICAgIDxwby1idXR0b25cbiAgICAgICAgW3AtdG9vbHRpcF09XCJsaXRlcmFscy5kb3duXCJcbiAgICAgICAgcC10b29sdGlwLXBvc2l0aW9uPVwidG9wXCJcbiAgICAgICAgcC1raW5kPVwidGVydGlhcnlcIlxuICAgICAgICBwLWljb249XCJwby1pY29uIHBvLWljb24tYXJyb3ctZG93blwiXG4gICAgICAgIFtwLWRpc2FibGVkXT1cInZlcmlmeUFycm93RGlzYWJsZWQob3B0aW9uLCAnZG93bicpXCJcbiAgICAgICAgKGNsaWNrKT1cImVtaXRDaGFuZ2VQb3NpdGlvbihvcHRpb24sICdkb3duJyk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXG4gICAgICA+XG4gICAgICA8L3BvLWJ1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2xpPlxuIl19