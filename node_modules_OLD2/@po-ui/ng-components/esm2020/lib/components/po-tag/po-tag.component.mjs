import { ChangeDetectionStrategy, Component, ViewChild } from '@angular/core';
import { PoTagBaseComponent } from './po-tag-base.component';
import { PoTagIcon } from './enums/po-tag-icon.enum';
import { PoTagType } from './enums/po-tag-type.enum';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../po-icon/po-icon.component";
import * as i3 from "../../directives/po-tooltip/po-tooltip.directive";
const _c0 = ["tagContainer"];
function PoTagComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7)(1, "span", 8);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.tagOrientation ? ctx_r1.label + ":" : ctx_r1.label);
} }
const _c1 = function (a0) { return { "color": a0 }; };
function PoTagComponent_po_icon_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-icon", 9);
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("p-icon", !ctx_r2.type ? ctx_r2.icon : ctx_r2.iconFromType)("ngStyle", !ctx_r2.tagColor && ctx_r2.inverse && !ctx_r2.customTextColor ? i0.ɵɵpureFunction1(2, _c1, ctx_r2.customColor) : !ctx_r2.type && ctx_r2.customTextColor ? i0.ɵɵpureFunction1(4, _c1, ctx_r2.customTextColor) : "");
} }
const poTagTypeDefault = 'po-tag-' + PoTagType.Info;
/**
 * @docsExtends PoTagBaseComponent
 *
 * @example
 *
 * <example name="po-tag-basic" title="PO Tag Basic">
 *  <file name="sample-po-tag-basic/sample-po-tag-basic.component.html"> </file>
 *  <file name="sample-po-tag-basic/sample-po-tag-basic.component.ts"> </file>
 * </example>
 *
 * <example name="po-tag-labs" title="PO Tag Labs">
 *  <file name="sample-po-tag-labs/sample-po-tag-labs.component.html"> </file>
 *  <file name="sample-po-tag-labs/sample-po-tag-labs.component.ts"> </file>
 * </example>
 *
 * <example name="po-tag-bank-account" title="PO Tag - Bank Account">
 *  <file name="sample-po-tag-bank-account/sample-po-tag-bank-account.component.html"> </file>
 *  <file name="sample-po-tag-bank-account/sample-po-tag-bank-account.component.ts"> </file>
 * </example>
 */
export class PoTagComponent extends PoTagBaseComponent {
    ngOnInit() {
        this.isClickable = this.click.observers.length > 0;
    }
    get iconFromType() {
        switch (this.type) {
            case PoTagType.Danger:
                return PoTagIcon.Danger;
            case PoTagType.Info:
                return PoTagIcon.Info;
            case PoTagType.Success:
                return PoTagIcon.Success;
            case PoTagType.Warning:
                return PoTagIcon.Warning;
        }
    }
    get tagColor() {
        if (this.type) {
            return this.inverse ? `po-tag-${this.type}-inverse` : `po-tag-${this.type}`;
        }
        if (this.color) {
            return this.inverse ? `po-text-${this.color}` : `po-${this.color}`;
        }
        if (!this.customColor) {
            return this.inverse ? `${poTagTypeDefault}-inverse` : poTagTypeDefault;
        }
    }
    get tagOrientation() {
        return this.orientation === this.poTagOrientation.Horizontal;
    }
    onClick() {
        const submittedTagItem = { value: this.value, type: this.type };
        this.click.emit(submittedTagItem);
    }
    onKeyPressed(event) {
        event.preventDefault();
        event.stopPropagation();
        this.onClick();
    }
    styleTag() {
        if (!this.tagColor && !this.inverse) {
            return { 'background-color': this.customColor };
        }
        else if (!this.tagColor && this.inverse && !this.customTextColor) {
            return { 'border': '1px solid ' + this.customColor };
        }
        else if (!this.tagColor && this.inverse && this.customTextColor) {
            return { 'border': '1px solid ' + this.customTextColor, 'background-color': this.customColor };
        }
        else {
            return {};
        }
    }
    getWidthTag() {
        return this.tagContainer.nativeElement.offsetWidth > 155;
    }
}
PoTagComponent.ɵfac = /*@__PURE__*/ function () { let ɵPoTagComponent_BaseFactory; return function PoTagComponent_Factory(t) { return (ɵPoTagComponent_BaseFactory || (ɵPoTagComponent_BaseFactory = i0.ɵɵgetInheritedFactory(PoTagComponent)))(t || PoTagComponent); }; }();
PoTagComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoTagComponent, selectors: [["po-tag"]], viewQuery: function PoTagComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 7);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tagContainer = _t.first);
    } }, features: [i0.ɵɵInheritDefinitionFeature], decls: 8, vars: 18, consts: [["p-tooltip-position", "top", 1, "po-tag-container", 3, "p-tooltip"], ["tagContainer", ""], ["class", "po-tag-title po-text-nowrap", 4, "ngIf"], [1, "po-tag-sub-container"], ["tabindex", "0", 1, "po-tag", 3, "ngClass", "ngStyle", "click", "keydown.enter", "keydown.space", "keyup.space"], ["class", "po-tag-icon", 3, "p-icon", "ngStyle", 4, "ngIf"], [1, "po-tag-value", 3, "ngStyle"], [1, "po-tag-title", "po-text-nowrap"], [1, "po-tag-label"], [1, "po-tag-icon", 3, "p-icon", "ngStyle"]], template: function PoTagComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0, 1);
        i0.ɵɵtemplate(2, PoTagComponent_div_2_Template, 3, 1, "div", 2);
        i0.ɵɵelementStart(3, "div", 3)(4, "div", 4);
        i0.ɵɵlistener("click", function PoTagComponent_Template_div_click_4_listener() { return ctx.onClick(); })("keydown.enter", function PoTagComponent_Template_div_keydown_enter_4_listener($event) { return ctx.onKeyPressed($event); })("keydown.space", function PoTagComponent_Template_div_keydown_space_4_listener($event) { return $event.preventDefault(); })("keyup.space", function PoTagComponent_Template_div_keyup_space_4_listener($event) { return ctx.onKeyPressed($event); });
        i0.ɵɵtemplate(5, PoTagComponent_po_icon_5_Template, 1, 6, "po-icon", 5);
        i0.ɵɵelementStart(6, "span", 6);
        i0.ɵɵtext(7);
        i0.ɵɵelementEnd()()()();
    } if (rf & 2) {
        i0.ɵɵclassProp("po-tag-container-horizontal", ctx.tagOrientation);
        i0.ɵɵproperty("p-tooltip", ctx.getWidthTag() ? ctx.value : "");
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.label);
        i0.ɵɵadvance(2);
        i0.ɵɵclassProp("po-clickable", ctx.isClickable)("po-tag-inverse", ctx.inverse && !ctx.type && !ctx.customTextColor);
        i0.ɵɵproperty("ngClass", ctx.tagColor)("ngStyle", ctx.styleTag());
        i0.ɵɵattribute("role", ctx.isClickable ? "button" : "");
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.icon);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngStyle", !ctx.tagColor && ctx.inverse && !ctx.customTextColor ? i0.ɵɵpureFunction1(14, _c1, ctx.customColor) : !ctx.type && ctx.customTextColor ? i0.ɵɵpureFunction1(16, _c1, ctx.customTextColor) : "");
        i0.ɵɵadvance(1);
        i0.ɵɵtextInterpolate(ctx.value);
    } }, dependencies: [i1.NgClass, i1.NgIf, i1.NgStyle, i2.PoIconComponent, i3.PoTooltipDirective], encapsulation: 2, changeDetection: 0 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoTagComponent, [{
        type: Component,
        args: [{ selector: 'po-tag', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div\n  #tagContainer\n  class=\"po-tag-container\"\n  [class.po-tag-container-horizontal]=\"tagOrientation\"\n  [p-tooltip]=\"getWidthTag() ? value : ''\"\n  p-tooltip-position=\"top\"\n>\n  <div *ngIf=\"label\" class=\"po-tag-title po-text-nowrap\">\n    <span class=\"po-tag-label\">{{ tagOrientation ? label + ':' : label }}</span>\n  </div>\n\n  <div class=\"po-tag-sub-container\">\n    <div\n      class=\"po-tag\"\n      [attr.role]=\"isClickable ? 'button' : ''\"\n      [class.po-clickable]=\"isClickable\"\n      [class.po-tag-inverse]=\"inverse && !type && !customTextColor\"\n      [ngClass]=\"tagColor\"\n      [ngStyle]=\"styleTag()\"\n      tabindex=\"0\"\n      (click)=\"onClick()\"\n      (keydown.enter)=\"onKeyPressed($event)\"\n      (keydown.space)=\"$event.preventDefault()\"\n      (keyup.space)=\"onKeyPressed($event)\"\n    >\n      <po-icon\n        *ngIf=\"icon\"\n        class=\"po-tag-icon\"\n        [p-icon]=\"!type ? icon : iconFromType\"\n        [ngStyle]=\"\n          !tagColor && inverse && !customTextColor\n            ? { 'color': customColor }\n            : !type && customTextColor\n            ? { 'color': customTextColor }\n            : ''\n        \"\n      >\n      </po-icon>\n\n      <span\n        class=\"po-tag-value\"\n        [ngStyle]=\"\n          !tagColor && inverse && !customTextColor\n            ? { 'color': customColor }\n            : !type && customTextColor\n            ? { 'color': customTextColor }\n            : ''\n        \"\n        >{{ value }}</span\n      >\n    </div>\n  </div>\n</div>\n" }]
    }], null, { tagContainer: [{
            type: ViewChild,
            args: ['tagContainer', { static: true }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdGFnLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby10YWcvcG8tdGFnLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby10YWcvcG8tdGFnLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQXNCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVsRyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM3RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFckQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDBCQUEwQixDQUFDOzs7Ozs7O0lDRW5ELDhCQUF1RCxjQUFBO0lBQzFCLFlBQTBDO0lBQUEsaUJBQU8sRUFBQTs7O0lBQWpELGVBQTBDO0lBQTFDLCtFQUEwQzs7OztJQWlCbkUsNkJBWVU7OztJQVRSLHlFQUFzQyw4TkFBQTs7QURyQjlDLE1BQU0sZ0JBQWdCLEdBQUcsU0FBUyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7QUFFcEQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQkc7QUFNSCxNQUFNLE9BQU8sY0FBZSxTQUFRLGtCQUFrQjtJQUtwRCxRQUFRO1FBQ04sSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRCxJQUFJLFlBQVk7UUFDZCxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDakIsS0FBSyxTQUFTLENBQUMsTUFBTTtnQkFDbkIsT0FBTyxTQUFTLENBQUMsTUFBTSxDQUFDO1lBRTFCLEtBQUssU0FBUyxDQUFDLElB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QUF3QztRQUdsQyxlQUFXO1FBQVgsZ0NBQVc7UUFRYixlQUFrQztRQUFsQywrQ0FBa0Msb0VBQUE7UUFFbEMsc0NBQW9CLDJCQUFBO1FBSHBCLHVEQUF5QztRQVl0QyxlQUFVO1FBQVYsK0JBQVU7UUFlWCxlQU1DO1FBTkQsd05BTUM7UUFDQSxlQUFXO1FBQVgsK0JBQVc7O3VGRGRQLGNBQWM7Y0FMMUIsU0FBUzsyQkFDRSxRQUFRLG1CQUVELHVCQUF1QixDQUFDLE1BQU07Z0JBR0YsWUFBWTtrQkFBeEQsU0FBUzttQkFBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgRWxlbWVudFJlZiwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9UYWdCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi9wby10YWctYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgUG9UYWdJY29uIH0gZnJvbSAnLi9lbnVtcy9wby10YWctaWNvbi5lbnVtJztcbmltcG9ydCB7IFBvVGFnSXRlbSB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby10YWctaXRlbS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9UYWdUeXBlIH0gZnJvbSAnLi9lbnVtcy9wby10YWctdHlwZS5lbnVtJztcblxuY29uc3QgcG9UYWdUeXBlRGVmYXVsdCA9ICdwby10YWctJyArIFBvVGFnVHlwZS5JbmZvO1xuXG4vKipcbiAqIEBkb2NzRXh0ZW5kcyBQb1RhZ0Jhc2VDb21wb25lbnRcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJwby10YWctYmFzaWNcIiB0aXRsZT1cIlBPIFRhZyBCYXNpY1wiPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tdGFnLWJhc2ljL3NhbXBsZS1wby10YWctYmFzaWMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tdGFnLWJhc2ljL3NhbXBsZS1wby10YWctYmFzaWMuY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwicG8tdGFnLWxhYnNcIiB0aXRsZT1cIlBPIFRhZyBMYWJzXCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby10YWctbGFicy9zYW1wbGUtcG8tdGFnLWxhYnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tdGFnLWxhYnMvc2FtcGxlLXBvLXRhZy1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInBvLXRhZy1iYW5rLWFjY291bnRcIiB0aXRsZT1cIlBPIFRhZyAtIEJhbmsgQWNjb3VudFwiPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tdGFnLWJhbmstYWNjb3VudC9zYW1wbGUtcG8tdGFnLWJhbmstYWNjb3VudC5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby10YWctYmFuay1hY2NvdW50L3NhbXBsZS1wby10YWctYmFuay1hY2NvdW50LmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLXRhZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby10YWcuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBQb1RhZ0NvbXBvbmVudCBleHRlbmRzIFBvVGFnQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBWaWV3Q2hpbGQoJ3RhZ0NvbnRhaW5lcicsIHsgc3RhdGljOiB0cnVlIH0pIHRhZ0NvbnRhaW5lcjogRWxlbWVudFJlZjtcblxuICBpc0NsaWNrYWJsZTogYm9vbGVhbjtcblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmlzQ2xpY2thYmxlID0gdGhpcy5jbGljay5vYnNlcnZlcnMubGVuZ3RoID4gMDtcbiAgfVxuXG4gIGdldCBpY29uRnJvbVR5cGUoKSB7XG4gICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgIGNhc2UgUG9UYWdUeXBlLkRhbmdlcjpcbiAgICAgICAgcmV0dXJuIFBvVGFnSWNvbi5EYW5nZXI7XG5cbiAgICAgIGNhc2UgUG9UYWdUeXBlLkluZm86XG4gICAgICAgIHJldHVybiBQb1RhZ0ljb24uSW5mbztcblxuICAgICAgY2FzZSBQb1RhZ1R5cGUuU3VjY2VzczpcbiAgICAgICAgcmV0dXJuIFBvVGFnSWNvbi5TdWNjZXNzO1xuXG4gICAgICBjYXNlIFBvVGFnVHlwZS5XYXJuaW5nOlxuICAgICAgICByZXR1cm4gUG9UYWdJY29uLldhcm5pbmc7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHRhZ0NvbG9yKCkge1xuICAgIGlmICh0aGlzLnR5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmludmVyc2UgPyBgcG8tdGFnLSR7dGhpcy50eXBlfS1pbnZlcnNlYCA6IGBwby10YWctJHt0aGlzLnR5cGV9YDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgcmV0dXJuIHRoaXMuaW52ZXJzZSA/IGBwby10ZXh0LSR7dGhpcy5jb2xvcn1gIDogYHBvLSR7dGhpcy5jb2xvcn1gO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5jdXN0b21Db2xvcikge1xuICAgICAgcmV0dXJuIHRoaXMuaW52ZXJzZSA/IGAke3BvVGFnVHlwZURlZmF1bHR9LWludmVyc2VgIDogcG9UYWdUeXBlRGVmYXVsdDtcbiAgICB9XG4gIH1cblxuICBnZXQgdGFnT3JpZW50YXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09IHRoaXMucG9UYWdPcmllbnRhdGlvbi5Ib3Jpem9udGFsO1xuICB9XG5cbiAgb25DbGljaygpIHtcbiAgICBjb25zdCBzdWJtaXR0ZWRUYWdJdGVtOiBQb1RhZ0l0ZW0gPSB7IHZhbHVlOiB0aGlzLnZhbHVlLCB0eXBlOiB0aGlzLnR5cGUgfTtcbiAgICB0aGlzLmNsaWNrLmVtaXQoc3VibWl0dGVkVGFnSXRlbSk7XG4gIH1cblxuICBvbktleVByZXNzZWQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMub25DbGljaygpO1xuICB9XG5cbiAgc3R5bGVUYWcoKSB7XG4gICAgaWYgKCF0aGlzLnRhZ0NvbG9yICYmICF0aGlzLmludmVyc2UpIHtcbiAgICAgIHJldHVybiB7ICdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5jdXN0b21Db2xvciB9O1xuICAgIH0gZWxzZSBpZiAoIXRoaXMudGFnQ29sb3IgJiYgdGhpcy5pbnZlcnNlICYmICF0aGlzLmN1c3RvbVRleHRDb2xvcikge1xuICAgICAgcmV0dXJuIHsgJ2JvcmRlcic6ICcxcHggc29saWQgJyArIHRoaXMuY3VzdG9tQ29sb3IgfTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnRhZ0NvbG9yICYmIHRoaXMuaW52ZXJzZSAmJiB0aGlzLmN1c3RvbVRleHRDb2xvcikge1xuICAgICAgcmV0dXJuIHsgJ2JvcmRlcic6ICcxcHggc29saWQgJyArIHRoaXMuY3VzdG9tVGV4dENvbG9yLCAnYmFja2dyb3VuZC1jb2xvcic6IHRoaXMuY3VzdG9tQ29sb3IgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfVxuXG4gIGdldFdpZHRoVGFnKCkge1xuICAgIHJldHVybiB0aGlzLnRhZ0NvbnRhaW5lci5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoID4gMTU1O1xuICB9XG59XG4iLCI8ZGl2XG4gICN0YWdDb250YWluZXJcbiAgY2xhc3M9XCJwby10YWctY29udGFpbmVyXCJcbiAgW2NsYXNzLnBvLXRhZy1jb250YWluZXItaG9yaXpvbnRhbF09XCJ0YWdPcmllbnRhdGlvblwiXG4gIFtwLXRvb2x0aXBdPVwiZ2V0V2lkdGhUYWcoKSA/IHZhbHVlIDogJydcIlxuICBwLXRvb2x0aXAtcG9zaXRpb249XCJ0b3BcIlxuPlxuICA8ZGl2ICpuZ0lmPVwibGFiZWxcIiBjbGFzcz1cInBvLXRhZy10aXRsZSBwby10ZXh0LW5vd3JhcFwiPlxuICAgIDxzcGFuIGNsYXNzPVwicG8tdGFnLWxhYmVsXCI+e3sgdGFnT3JpZW50YXRpb24gPyBsYWJlbCArICc6JyA6IGxhYmVsIH19PC9zcGFuPlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwicG8tdGFnLXN1Yi1jb250YWluZXJcIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cInBvLXRhZ1wiXG4gICAgICBbYXR0ci5yb2xlXT1cImlzQ2xpY2thYmxlID8gJ2J1dHRvbicgOiAnJ1wiXG4gICAgICBbY2xhc3MucG8tY2xpY2thYmxlXT1cImlzQ2xpY2thYmxlXCJcbiAgICAgIFtjbGFzcy5wby10YWctaW52ZXJzZV09XCJpbnZlcnNlICYmICF0eXBlICYmICFjdXN0b21UZXh0Q29sb3JcIlxuICAgICAgW25nQ2xhc3NdPVwidGFnQ29sb3JcIlxuICAgICAgW25nU3R5bGVdPVwic3R5bGVUYWcoKVwiXG4gICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgKGNsaWNrKT1cIm9uQ2xpY2soKVwiXG4gICAgICAoa2V5ZG93bi5lbnRlcik9XCJvbktleVByZXNzZWQoJGV2ZW50KVwiXG4gICAgICAoa2V5ZG93bi5zcGFjZSk9XCIkZXZlbnQucHJldmVudERlZmF1bHQoKVwiXG4gICAgICAoa2V5dXAuc3BhY2UpPVwib25LZXlQcmVzc2VkKCRldmVudClcIlxuICAgID5cbiAgICAgIDxwby1pY29uXG4gICAgICAgICpuZ0lmPVwiaWNvblwiXG4gICAgICAgIGNsYXNzPVwicG8tdGFnLWljb25cIlxuICAgICAgICBbcC1pY29uXT1cIiF0eXBlID8gaWNvbiA6IGljb25Gcm9tVHlwZVwiXG4gICAgICAgIFtuZ1N0eWxlXT1cIlxuICAgICAgICAgICF0YWdDb2xvciAmJiBpbnZlcnNlICYmICFjdXN0b21UZXh0Q29sb3JcbiAgICAgICAgICAgID8geyAnY29sb3InOiBjdXN0b21Db2xvciB9XG4gICAgICAgICAgICA6ICF0eXBlICYmIGN1c3RvbVRleHRDb2xvclxuICAgICAgICAgICAgPyB7ICdjb2xvcic6IGN1c3RvbVRleHRDb2xvciB9XG4gICAgICAgICAgICA6ICcnXG4gICAgICAgIFwiXG4gICAgICA+XG4gICAgICA8L3BvLWljb24+XG5cbiAgICAgIDxzcGFuXG4gICAgICAgIGNsYXNzPVwicG8tdGFnLXZhbHVlXCJcbiAgICAgICAgW25nU3R5bGVdPVwiXG4gICAgICAgICAgIXRhZ0NvbG9yICYmIGludmVyc2UgJiYgIWN1c3RvbVRleHRDb2xvclxuICAgICAgICAgICAgPyB7ICdjb2xvcic6IGN1c3RvbUNvbG9yIH1cbiAgICAgICAgICAgIDogIXR5cGUgJiYgY3VzdG9tVGV4dENvbG9yXG4gICAgICAgICAgICA/IHsgJ2NvbG9yJzogY3VzdG9tVGV4dENvbG9yIH1cbiAgICAgICAgICAgIDogJydcbiAgICAgICAgXCJcbiAgICAgICAgPnt7IHZhbHVlIH19PC9zcGFuXG4gICAgICA+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=